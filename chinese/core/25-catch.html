<!--
  Copyright 2015 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="catch">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>
</script>
<script type="text/x-red" data-help-name="catch">
    <p>获取在同一个标签下节点抛出的错误信息。</p>
    <p>如果节点在抛出错误的同时处理消息，那么流会立刻停止。这个节点可以用来获取错误信息并用一个专用的流来处理它们。</p>
    <p>这个节点会获取同一个标签里面节点抛出的错误。如果一个标签页下有多个<em>catch</em>节点，那么所有节点都会被触发。</p>
    <p>如果字一个子流中抛出错误，那么这个子流中的任意<em>catch</em>节点获取。如果没有<em>catch</em>节点，那么错误将会被传播到有子流进程的标签页下。</p>
    <p>如果是由抛出错误的节点提供消息，那么该消息是一条原始消息。这条消息有<code>error</code>
       属性，该属性包含以下参数：
       <ul>
        <li><code>message</code> :错误消息</li>
        <li><code>source.id</code> :抛出错误的节点id</li>
        <li><code>source.type</code> : 抛出错误的节点类型</li>
       </ul>
   </p>
   <p>如果这条消息已经有<code>error</code>属性，它将被复制到<code>_error</code>中。</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('catch',{
        category: 'input',
        color:"#e49191",
        defaults: {
            name: {value:""}
        },
        inputs:0,
        outputs:1,
        icon: "alert.png",
        label: function() {
            return this.name||"catch";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
