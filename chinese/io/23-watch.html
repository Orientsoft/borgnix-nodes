<!--
  Copyright 2013 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="watch">
    <div class="form-row node-input-filename">
         <label for="node-input-files"><i class="fa fa-file"></i> File(s)</label>
         <input type="text" id="node-input-files" placeholder="File(s) or Directory">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
     <div id="node-input-tip" class="form-tips">在Windows系统上，在路径中必须使用\\进行分隔。
     </div>
</script>

<script type="text/x-red" data-help-name="watch">
    <p>监视目录或文件的变化</p>
    <p>可以输入使用逗号分隔的目录和文件列表，路径中有空格的，需要使用引号。</p>
    <p>在Windows系统上，在路径中使用\\进行分隔。</p>
    <p><b>msg.payload</b>中是发生改变的文件的完整路径，<b>msg.topic</b>中包含转化成字符串的监视列表</p>
    <p><b>msg.file</b>包含发生改变文件的文件名
    <b>msg.type</b>是发生改变对象的类型，一般为<i>file</i>或<i>directory</i>,
    <b>msg.size</b>是发生改变的文件大小，单位为字节</p>
    <p>参数</p>
    <ul>
        <li><b>Files</b></li>
        <li><b>Name</b></li>
    </ul>
    <p><b>提示：</b>被监视的目录或文件必须首先存在，若目录或文件被删除，即使被重新创建，也不会被继续监视，</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('watch',{
        category: 'advanced-input',
        defaults: {
            name: {value:""},
            files: {value:"",required:true}
        },
        color:"BurlyWood",
        inputs:0,
        outputs:1,
        icon: "watch.png",
        label: function() {
            return this.name||this.files;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
